# MetricMonitoring

### Задание
Создать систему мониторинга, которая будет отслеживать работу различных компонентов вашего приложения с помощью Spring Kafka. Эта система будет включать в себя Producer для отправки метрик, Consumer для их обработки и анализа, а также REST API для просмотра метрик.

### Общая информация о приложении
Приложение построено на основе микросервисов Consumer и Producer. 

Producer имеет API, куда могут приходить метрики от внешних источников. Также в этом микросервисе имеется автогенератор POST запросов в виде json заданного формата, который с периодичностью 10 секунд отправляет 5 видов метрик на API.Данный функционал добавлен для быстрой демонстрации возможностей Producer. После перехвата запроса Producer отправляет метрики в kafka topic с названием metrics-topic. В роли брокера сообщений выступает кластер Kafka на 3 ноды. 

Consumer в свою очередь принимает и обрабатывает сообщение из metrics-topic. В этом микросервисе также настроен механизм DLT с дефолтной обработкой исключений возникающих при приеме/обработке сообщений (кастомизации по обработке особо нет, сообщения с иcключениями просто отправляются в metrics-topic.DLT). При успешной обработке сообщений, метрики сохраняются в БД. На стороне Consumer имеется REST API для просмотра всех метрик или отдельной по Id.

Взаимодействие с Producer:
- Отправка POST запроса на адрес с содержимым в виде Json (отправка метрик в Producer):
  
http://localhost:8081/metrics

Взаимодействие с Consumer:
Отправка GET запроса на адрес (вывод всех метрик из БД):

http://localhost:8080/metrics
Отправка GET запроса на адрес c id в параметрах (вывод отдельной метрики по Id):

http://localhost:8080/metrics/id

Для удобства тестирования подключен Swagger, дано описание контроллеров и их методов. Дополнительно для ускорения тестирования приложена Postman коллекция на отправку всех имеющихся видов запросов (в корне проекта).

### Быстрый запуск
1) Склонировать репозиторий проекта
2) Из терминала перейти в каталог проекта
3) Набрать команду и подождать окончания сборки: 
   docker-compose up


### Быстрое тестирование приложения
Для тестирования можно использовать браузер, postman, swagger-ui. Вариант для Postman:
1) Запустить коллекцию Postman через одноименное приложение, результат – статус 200 по всем запросам

